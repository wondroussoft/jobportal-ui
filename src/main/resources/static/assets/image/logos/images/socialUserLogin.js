var socialLogin=(function(){var postLoginData=function(result,data,socialNetwork){var lang=B8.get('html').lang;var loginData={first_name:result.name,last_name:result.last_name,gender:"",id:result.id,birthday:"",email:result.email,code:data.token};var specialtyRegistration=0;if(B8.get("#LoginForm_specialtiesRegistration")!=null){specialtyRegistration=B8.get("#LoginForm_specialtiesRegistration").value}var data={facebookEmail:result.email,facebookId:result.id,currentUrl:B8v.login.returnUrl,pageBody:"login",lang:lang,socialNetwork:socialNetwork,gplusJSONObj:JSON.stringify(loginData),specialtiesRegistration:specialtyRegistration};sendPostRequest("/"+lang+"/login-facebook/",data);}
var sendPostRequest=function(url,data){var form=document.createElement('FORM');form.method='POST';form.action=url;for(var key in data){var tb=document.createElement('INPUT');tb.type='hidden';tb.name=key;tb.value=data[key];form.appendChild(tb);}var csrftb=document.createElement('INPUT');csrftb.name=csrfTokenName;csrftb.value=csrfToken;form.appendChild(csrftb);document.body.appendChild(form);form.submit();}
return{google:function(result,data){postLoginData(result,data,'gplus');},facebook:function(result,data){postLoginData(result,data,'facebook');}};})();